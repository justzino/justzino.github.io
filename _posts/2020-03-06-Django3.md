---
title: "Django로 웹 개발하기 - 3. 회원가입(user 모델 만들기)"
excerpt: "회원가입을 만들기 위해 user 모델링"

categories:
  - Django
tags:
  - Django
  - 웹개발
  - AbstractUser
last_modified_at: 2020-03-06T13:00:00-22:00
---

이 글은 fast_campus의 파이썬 웹 개발 수업을 듣고 정리한 내용으로, Django의 AbstractUser를 사용하여 user모델을 확장하고 회원가입 모델링 하는 과정을 살펴보겠다.

### 회원가입

#### User 모델 확장

- 이전까지 장고 내장 User 모델을 잘 사용해왔는데 User 모델을 왜 확장 해야하나??

  - Django의 내장 User모델이 제공하는 필드 외에 다른 필드, 등을 추가하고 싶을 때를 위해서
  - 내 입맛대로 User모델 커스텀하기 위해서

- 그렇다면 User Model 확장하는 방법은..?
  1. proxy model(프록사 모델 사용하기)
  2. 하나의 모델을 정의 후, User모델과 One-to-One(일대일) 관계 형성
  3. AbstractBaseUser
  4. **AbstractUser**

AbstractUser를 사용하여 user Model을 아래 코드와 같이 확장 시킬 수 있다.

```py
from django.db import models
from django.contrib.auth.models import AbstractUser

class FCUser(AbstractUser):
	...
```

#### User 모델 만들기

1. 앱 만들기

   - users 앱 만들기
     `python manage.py startapp users`

   - 앱을 만들고 나면 settings.py 파일 안에 INSTALLED_APPS에 앱을 추가

2. model 만들기

   - models.py 에 User 모델을 만들기

3. 데이터 베이스 적용하기

   - makemigrations 명령어를 사용해서 모델의 변경사항을 기록 : `python manage.py makemigrations users`

   - 기록한 변경사항을 데이터베이스에 적용을 위해 migrate 명령어 사용 : `python manage.py migrate`

   - AbstractUser을 쓰면 model에 이력이 잘못 남겨질 수 있음 (Django의 고질적 문제) : `rm db.sqlite3` 으로 db를 먼저 날려주고 하면 됨

   - User 모델을 커스터마이징 했을 때 발생하는 에러가 있는경우 settings.py 에 다음을 추가해준다.

     ```py
     AUTH_USER_MODEL = 'users.User'
     ```

4. 관리자 사이트 admin.py 에 user등록하기

   ```py
   from .models import User

   admin.site.register(User)
   ```

5. forms.py 만들기

6. views.py 와 urls.py 만들기
